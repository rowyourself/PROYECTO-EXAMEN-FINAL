
{% extends 'base.html'%}
{%load static%}

{% block content %}

<div class="alert alert-primary" role="alert">
  <div class="container">
      <h4 class="text-center mb-4">CARRITO DE COMPRAS</h4>
      <div class="table-responsive">
          <table class="table table-bordered table-hover">
              <thead class="table-light">
                  <tr>
                      <th scope="col">PRODUCTO</th>
                      <th scope="col" class="text-center">PRECIO UNITARIO</th>
                      <th scope="col" class="text-center">CANTIDAD</th>
                      <th scope="col" class="text-center">SUBTOTAL</th>
                      <th scope="col"></th>
                  </tr>
              </thead>
              <tbody>
                  {% if request.session.carrito.items %}
                  {% for key, value in request.session.carrito.items %}
                  <tr>
                      <td>
                          <div class="d-flex align-items-center">
                              <img   class="img-thumbnail me-3" style="max-width: 80px;">
                              <div>
                                  <h6 class="mb-0">{{ value.nombre }}</h6>
                                  <p class="mb-0">{{ value.categoria }}</p>
                              </div>
                          </div>
                      </td>
                      <td class="text-center align-middle">${{ value.acumulado }}</td>
                      <td class="text-center align-middle">
                          <div class="input-group">
                              <span class="input-group-btn">
                                  <a href="{% url 'Sub' value.producto_id %}" class="btn btn-outline-secondary btn-sm" role="button">-</a>
                              </span>
                              <input type="text" class="form-control form-control-sm text-center" value="{{ value.cantidad }}" readonly>
                              <span class="input-group-btn">
                                  <a href="{% url 'Add' value.producto_id %}" class="btn btn-outline-secondary btn-sm" role="button">+</a>
                              </span>
                          </div>
                      </td>
                      <td class="text-center align-middle">${{ value.acumulado  }}</td>
                      <td class="text-center align-middle">
                          <a href="#" class="btn btn-outline-danger btn-sm">Eliminar</a>
                      </td>
                  </tr>
                  {% endfor %}
                  {% else %}
                  <tr>
                      <td colspan="5">
                          <div class="alert alert-danger text-center">No hay productos en el carrito</div>
                      </td>
                  </tr>
                  {% endif %}
                  <tr>
                      <td colspan="3" class="text-end"><strong>Total:</strong></td>
                      <td colspan="2" class="text-center">${{ total_carrito }}</td>
                  </tr>
              </tbody>
          </table>
      </div>
      <hr>
      <div class="row justify-content-end">
          <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-2">
              <a href="{% url 'CLS' %}" class="btn btn-outline-danger btn-block">Limpiar Carrito</a>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-2">
              <a href="#" class="btn btn-outline-success btn-block">Guardar Carrito</a>
          </div>
      </div>
  </div>
</div>


{% endblock %}    